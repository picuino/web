{#-
   Static web generator for image files.
   https://github.com/picuino/wildpflanzen

   Copyright (c) 2018-2019 by Carlos Pardo

   License GPL v3  <https://www.gnu.org/licenses/gpl-3.0.html>
   This program is free software; you can redistribute it and/or
   modify it under the terms of the GNU General Public License
   version 3 as published by the Free Software Foundation.
-#}

{% extends "base.html" %}


{% block page_title -%}{{ macros.index_title(index.index_name) }} | Wildpflanzen{%- endblock -%}


{% block navi_global %}
   {{ macros.navi_global('index') }}
{%- endblock %}


{% block navi_local %}
   <ul>
   {% if not 'family' in index.index_name %}<li class="navi_select"><span class="btn">Allgemein</span>
   {%- elif '_de' in index.index_name %}<li><a href="index-genus-de.html">Allgemein</a>
   {%- else %}<li><a href="index-genus.html">Allgemein</a>{% endif %}
   {% if 'family' in index.index_name %}</li><li class="navi_select"><span class="btn">Nach Familien</span>
   {%- elif '_de' in index.index_name %}</li><li><a href="index-family-de.html">Nach Familien</a>
   {%- else %}</li><li><a href="index-family.html">Nach Familien</a>{% endif %}
   </li>
   </ul>
   </div>

   <div class="navi">
   <ul>
   {% if '_de' in index.index_name %}<li class="navi_select"><span class="btn">Deutsche Namen</span>
   {%- elif 'family' in index.index_name %}<li><a href="index-family-de.html">Deutsche Namen</a>
   {%- else %}<li><a href="index-genus-de.html">Deutsche Namen</a>{% endif %}
   {% if not '_de' in index.index_name %}</li><li class="navi_select"><span class="btn">Wissenschaftliche Namen</span>
   {%- elif 'family' in index.index_name %}</li><li><a href="index-family.html">Wissenschaftliche Namen</a>
   {%- else %}</li><li><a href="index-genus.html">Wissenschaftliche Namen</a>{% endif %}
   </li>
   </ul>
{%- endblock %}


{% block content %}
   <!-- Page title -->
   <h1>{{ macros.index_title(index.index_name) }}</h1>

   <!-- Dictionary keys -->
   <div class="index_dict">
   <ul>
   {% set ns = namespace(k='') %}      
   {% for key in index['keys'] %}
   {% if ns.k != key[0] | lower() %}
      {% set ns.k = key[0] | lower() %}   
      {% if loop.index > 1 %}</li>{% endif %}<li><a href='#index-{{ ns.k }}'>{{ ns.k | upper() }}</a>
   {% endif %}
   {%- endfor %}
   </li>
   </ul>
   </div>

   <!-- list of sorted species -->
   <div class="index_species">
   {% set ns.k = '' %}  
   {% for key in index['keys'] %} {% set species_list = index.species[key] %}
   
      <h2{% if ns.k != key[0] | lower() %}{% set ns.k = key[0] | lower() %} id='index-{{ns.k}}'{% endif %}>{{ key }}</h2>
      
      <ul>
      {%- if index.index_name == 'genus_de' %}
         {%- for species in species_list|sort(attribute='name_de') %}
         <li><a href="{{species.filename}}.html">{{ macros.name_deutche_index(species) }} {% if macros.name_deutche_index(species) %} / {% endif %} {{ species.genus }} {{ species.species }}</a></li>
         {%- endfor %}

      {%- elif index.index_name == 'genus' %}
         {%- for species in species_list|sort(attribute='genus') %}
         <li><a href="{{species.filename}}.html">{{ species.genus }} {{ species.species }} {% if macros.name_deutche_index(species) %} / {% endif %} {{ macros.name_deutche_index(species) }}</a></li>
         {%- endfor %}

      {%- elif index.index_name == 'family' %}
         {%- for species in species_list|sort(attribute='genus') %}
         <li><a href="{{species.filename}}.html">{{ species.genus }} {{ species.species }} {% if macros.name_deutche_index(species) %} / {% endif %} {{ macros.name_deutche_index(species) }}</a></li>
         {%- endfor %}

      {%- elif index.index_name == 'family_de' %}
         {%- for species in species_list|sort(attribute='name_de') %}
         <li><a href="{{species.filename}}.html">{{ macros.name_deutche_index(species) }} {% if macros.name_deutche_index(species) %} / {% endif %} {{ species.genus }} {{ species.species }}</a></li>
         {%- endfor %}

      {%- else %}

         <!-- Error, unknown index: "{{index.index_name}}" -->

      {%- endif %}
      </ul>
      {{ macros.nach_oben() }}
   {% endfor %}
   </div> <!-- index_species end -->

{%- endblock %}
